# freenac_doc
Документация по FreeNAC
Настройка GUI доступа с помощью vmps.exe.
Если сделано все по инструкции в MySQL должен быть пользователь invenwrite, этот пользователь имеет полный доступ к БД opennac.
Работа с помощью vmps.exe с БД осуществляется с помощью этого пользователя. Для того чтобы иметь подключение к БД необходимо сгенерировать хеш пароля данного пользователя. Для этого запускаем vmps.exe

Admin -> Encrypt user
Enter username: **admin**
Enter password: **admin**

Generate Key

Generate Key:**/jpwJvRwN5TwmS8=**

```xml
<vmps>
  <comment c="Sample vmps.xml configuration file for the NAC gui vmps.exe with Demo company. Change the server IP as appropriate"/>
  
  <settings company="RN-Purneftegaz"  StaticInvEnabled="0" NmapEnabled="1" AntiVirusEnabled="0"
  PatchCableEnabled="1"/>
	<mysql server="192.168.1.1" port="3306" 
        auth="/jpwJvRwN5TwmS8=" database="opennac" />
	<mssql-inv server="UnusedServer\UnusedInstance"  
        auth="XX" database="YYY" />        	
</vmps>
```

Добавляем пользователя админа, username должен соответствовать тому пользователя из под имени которого будет запускаться vmps:
```mysql
insert into opennac.users (username, Surname, GivenName, nac_rights) values
('jsmith', 'John', 'Smith', 99);
```













>Есть два уровня аутентификации и авторизации:
>А. Аутентификация и авторизация MySQL, графический интерфейс Windows использует определенного пользователя и пароль для подключения к БД.
Б. Идентификация и авторизация Windows GUI: GUI берет вашего текущего пользователя, вошедшего в систему Windows, чтобы идентифицировать вас, и использует значение в поле nac_rights для этого пользователя, чтобы контролировать то, что вы можете делать (принудительное исполнение на стороне клиента). Мы называем #это «пользователем NAC»
>MySQL пользователь.
>Пользователь MySQL создается как часть конфигурации mysql и получает права на удаленный доступ к определенным таблицам. Этого пользователя обычно называют изобретателем (по историческим причинам). Пароль, выбранный для этого пользователя, теперь необходимо зашифровать и сохранить в файле конфигурации Windows.
Чтобы убедиться, что пользователь inventorywrite существует, попробуйте следующую команду SQL:
select * from user where user='inventwrite';
Для того что бы работать необходимо по аналогии создания пользователя Inventwrite создать других пользователей.
Если вы используете демонстрационную виртуальную машину, пароль - PASSWORD1. 
Это, конечно, нужно изменить в продуктивной среде! 
Теперь сообщите графическому интерфейсу Windows, какое имя пользователя и пароль следует использовать. 
Имя пользователя и пароль хранятся в зашифрованной строке под названием «auth» в файле конфигурации vmps.xml. 
>1. Запуск графического интерфейса vmps.exe 
>2. Выберите Admin -> Encrypt User. 
>3. Введите имя пользователя и пароль и нажмите Generate. 
>4. Скопируйте значение поля «сгенерированный ключ» в поле «auth» в vmps.xml. 
>5. Затем выйдите из графического интерфейса.
